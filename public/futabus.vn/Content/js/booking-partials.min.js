/*! website 30-03-2017 */
function makeUpOption(a){return $.map(a,function(a){if("undefined"!=typeof a&&null!=a){var b="";switch(a.v){default:b="<option value='{0}'>{1}</option>".format(a.v,a.t)}return b}return""})}function getRealTextOption(a){switch(a=a.trim()){case"An Giang (Châu Đốc,Long Xuyên)":a="An Giang";break;case"Đồng Tháp (Sa Đéc,Cao Lãnh,Hồng Ngự)":a="Đồng Tháp";break;case"Hậu Giang (Vị Thanh)":a="Hậu Giang";break;case"Kiên Giang (Rạch Giá,Hà Tiên)":a="Kiên Giang"}return a}$(document).ready(function(){for(var a=$("html")[0].lang,b=[],c=[],d=0;d<settings.RouteCode.length;d++)c.indexOf(settings.RouteCode[d].OriginCode)===-1&&(b.push({v:settings.RouteCode[d].OriginCode,t:settings.RouteCode[d].OriginName}),c.push(settings.RouteCode[d].OriginCode));b.sort(function(a,b){return a.t<b.t?-1:a.t>b.t?1:0});var e=$("select[name=idOrigin]").empty();e.append(makeUpOption(b)),e.on("change",function(){var a=e.val(),b=[];c=[];for(var d=0;d<settings.RouteCode.length;d++)settings.RouteCode[d].OriginCode===a&&c.indexOf(settings.RouteCode[d].DestCode)===-1&&(b.push({v:settings.RouteCode[d].DestCode,t:settings.RouteCode[d].DestName}),c.push(settings.RouteCode[d].DestCode));b.sort(function(a,b){return a.t<b.t?-1:a.t>b.t?1:0});var f=$("select[name=idDest]").empty();f.append(makeUpOption(b)),f.selectpicker("refresh")}),e.trigger("change"),$(".selectpicker").selectpicker();var f=moment(settings.ValidStartDateOffset,"YYYY-MM-DDTHH:mm:ss.000");moment().diff(f,"day")>=0&&(f=moment().add(settings.ValidStartDateOffset,"day"));var g=moment(settings.ValidEndDate,"YYYY-MM-DDTHH:mm:ss.000");switch($("input[name=numOfTicket]").attr("max",settings.MaxBookSeat),a){case"en-US":$("input[name=dDate]").datepicker({language:"en",format:"dd-mm-yyyy",startDate:f.toDate(),endDate:g.toDate(),autoclose:!0});break;default:$("input[name=dDate]").datepicker({language:"vi",format:"dd-mm-yyyy",startDate:f.toDate(),endDate:g.toDate(),autoclose:!0,weekStart:1})}$(".btn-booking").on("click",function(b){var c,d=getRealTextOption($("select[name=idOrigin] > option:selected").text()),e=getRealTextOption($("select[name=idDest] > option:selected").text()),f=$("input[name=dDate]").val(),g=$("input[name=numOfTicket]").val();switch(a){case"en-US":c="/en-US/buy-bus-ticket-from-{0}-to-{1}.html#/step1/{2}/{3}".format(slug(d),slug(e),f,g);break;default:c="/vi-VN/mua-ve-xe-{0}-di-{1}.html#/step1/{2}/{3}".format(slug(d),slug(e),f,g)}dataLayer.push({event:"productClick",ecommerce:{click:{actionField:{list:"{0} - {1}".format(d,e)},products:[{name:"{0}-{1}-{2}".format("All",d,e),id:"{0}-{1}-{2} ⇒ {3}".format(f,"All",d,e),brand:"Phương Trang",category:"{0} ⇒ {1}".format(d,e)}]}},eventCallback:function(){document.location=c}})})});